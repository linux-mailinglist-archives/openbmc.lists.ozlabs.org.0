Return-Path: <openbmc-bounces+lists+openbmc=lfdr.de@lists.ozlabs.org>
X-Original-To: lists+openbmc@lfdr.de
Delivered-To: lists+openbmc@lfdr.de
Received: from lists.ozlabs.org (lists.ozlabs.org [112.213.38.117])
	by mail.lfdr.de (Postfix) with ESMTPS id 161D78C6A5F
	for <lists+openbmc@lfdr.de>; Wed, 15 May 2024 18:16:30 +0200 (CEST)
Authentication-Results: lists.ozlabs.org;
	dkim=pass (2048-bit key; unprotected) header.d=yadro.com header.i=@yadro.com header.a=rsa-sha256 header.s=mta-04 header.b=dGUVY7xW;
	dkim=pass (2048-bit key; unprotected) header.d=yadro.com header.i=@yadro.com header.a=rsa-sha256 header.s=mta-03 header.b=jLnrwLyE;
	dkim-atps=neutral
Received: from boromir.ozlabs.org (localhost [IPv6:::1])
	by lists.ozlabs.org (Postfix) with ESMTP id 4VfddR3XHQz3d81
	for <lists+openbmc@lfdr.de>; Thu, 16 May 2024 02:16:27 +1000 (AEST)
X-Original-To: openbmc@lists.ozlabs.org
Delivered-To: openbmc@lists.ozlabs.org
Authentication-Results: lists.ozlabs.org; dmarc=pass (p=none dis=none) header.from=yadro.com
Authentication-Results: lists.ozlabs.org;
	dkim=pass (2048-bit key; unprotected) header.d=yadro.com header.i=@yadro.com header.a=rsa-sha256 header.s=mta-04 header.b=dGUVY7xW;
	dkim=pass (2048-bit key; unprotected) header.d=yadro.com header.i=@yadro.com header.a=rsa-sha256 header.s=mta-03 header.b=jLnrwLyE;
	dkim-atps=neutral
Authentication-Results: lists.ozlabs.org; spf=pass (sender SPF authorized) smtp.mailfrom=yadro.com (client-ip=89.207.88.248; helo=mta-04.yadro.com; envelope-from=d.sharikhin@yadro.com; receiver=lists.ozlabs.org)
Received: from mta-04.yadro.com (mta-04.yadro.com [89.207.88.248])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by lists.ozlabs.org (Postfix) with ESMTPS id 4VfdZv64wLz3cfg
	for <openbmc@lists.ozlabs.org>; Thu, 16 May 2024 02:14:15 +1000 (AEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 mta-04.yadro.com 87F5EC0002
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yadro.com; s=mta-04;
	t=1715789164; bh=j8xjRKX4DU+lAnFpI1Y64G6gdKKLru8RbNefJzSeMsI=;
	h=From:To:Subject:Date:Message-ID:Content-Type:MIME-Version:From;
	b=dGUVY7xWV2HBoDM3hUmMbm7GKGZe8/V+NobMHLm2vB6q1ew1FOtieMQP+tB+70Dz7
	 q67eURKywxScL7Oj9qJoCPiyMwI7QxzFISz83YMgpO85b9Fl0Y+KewqZ4WyU+0ig4B
	 UFOOo2PxCrMdiPMVcy3MnZ9WN3HxI5IlJhAxj1SZG6PZUtl/TmUEP1IqRqWyP85jiv
	 BBlj7XOlLmnL2478Ll9fmxDK6DxD2W9Gbe/OVNj50WcP9gsXC+5vSiDZpi3GFsjTuZ
	 6d3nm9mvEp8Qqk8bSgXFfq2jl/5aDnzxgqPpMIc7Mjj+Ktw3phqmqEv24bUcjtnXCp
	 I/U1oxXDIGv+w==
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yadro.com; s=mta-03;
	t=1715789164; bh=j8xjRKX4DU+lAnFpI1Y64G6gdKKLru8RbNefJzSeMsI=;
	h=From:To:Subject:Date:Message-ID:Content-Type:MIME-Version:From;
	b=jLnrwLyEfcGSBAwRxWY2H2BGc7EQO+EMO5SE7QlSwj2tS8kQ8aWvQZTh2/9e4GeR4
	 Q65zqzSwJvBu/0DLFfxcvz3QnASfsDg0wtYIuHOKenmxAwe7NgrInJhVs/x+ZJfpEv
	 kg8W6adgXpIThM3pbjhbnGWq+UDejeprG1htg83Vz0dJL4BCcQ7BIW7mpDDW3kXNyf
	 5GVD+I1xLBbXioT7gKXYERM+emqNxTK0ftLUeHhSvXWzDsxJaBoojpDdWHg+GcbDln
	 uxgQyCxPvkM4DJvWslG8IVMfSbuU7ZlKIpZkAfj2z9/tkhDAvbxuTal9Zj54Z+kvfv
	 ZQJnj2G5E4pvQ==
From: Dmitriy Sharikhin <d.sharikhin@yadro.com>
To: "openbmc@lists.ozlabs.org" <openbmc@lists.ozlabs.org>
Subject: [PATCH u-boot, v2019.04-aspeed-openbmc v1 2/3] gpio: add aspeed-sgpio
 controller
Thread-Topic: [PATCH u-boot, v2019.04-aspeed-openbmc v1 2/3] gpio: add
 aspeed-sgpio controller
Thread-Index: AQHapuHJ6tm8y+aHgkeGUV5DQ0J/0Q==
Date: Wed, 15 May 2024 16:06:03 +0000
Message-ID: <d78f7483392bb70b1b9562cdbf0ee91c2843f3fd.camel@yadro.com>
Accept-Language: ru-RU, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-Type: text/plain; charset="utf-8"
Content-ID: <0D71AEFADB1C50499BB1778C297A1548@yadro.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-BeenThere: openbmc@lists.ozlabs.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Development list for OpenBMC <openbmc.lists.ozlabs.org>
List-Unsubscribe: <https://lists.ozlabs.org/options/openbmc>,
 <mailto:openbmc-request@lists.ozlabs.org?subject=unsubscribe>
List-Archive: <http://lists.ozlabs.org/pipermail/openbmc/>
List-Post: <mailto:openbmc@lists.ozlabs.org>
List-Help: <mailto:openbmc-request@lists.ozlabs.org?subject=help>
List-Subscribe: <https://lists.ozlabs.org/listinfo/openbmc>,
 <mailto:openbmc-request@lists.ozlabs.org?subject=subscribe>
Cc: Alexander Amelkin <a.amelkin@yadro.com>, Igor Kononenko <i.kononenko@yadro.com>, "Alexander A. Filippov" <a.filippov@yadro.com>
Errors-To: openbmc-bounces+lists+openbmc=lfdr.de@lists.ozlabs.org
Sender: "openbmc" <openbmc-bounces+lists+openbmc=lfdr.de@lists.ozlabs.org>

VGhpcyBwYXRjaCBicmluZ3Mgc3VwcG9ydCBmb3IgQXNwZWVkIFNlcmlhbCBHUElPIGNvbnRyb2xs
ZXINCmluIEFTVDI1MDAvQVNUMjYwMCB0YXJnZXRzLiBEcml2ZXIgaXMgYmFzZWQgb24gTGludXgg
S2VybmVsDQpkcml2ZXIgd3JpdHRlbiBieSBBbWVyaWNhbiBNZWdhdHJlbmRzIEludGVybmF0aW9u
YWwuDQoNClNpZ25lZC1vZmYtYnk6IERtaXRyaWkgU2hhcmlraGluIDxkLnNoYXJpa2hpbkB5YWRy
by5jb20+DQotLS0NCiBkcml2ZXJzL2dwaW8vS2NvbmZpZyAgICAgICAgfCAgIDUgKw0KIGRyaXZl
cnMvZ3Bpby9NYWtlZmlsZSAgICAgICB8ICAgMSArDQogZHJpdmVycy9ncGlvL2FzcGVlZF9zZ3Bp
by5jIHwgMzI0ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIDMgZmlsZXMg
Y2hhbmdlZCwgMzMwIGluc2VydGlvbnMoKykNCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9n
cGlvL2FzcGVlZF9zZ3Bpby5jDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL2dwaW8vS2NvbmZpZyBi
L2RyaXZlcnMvZ3Bpby9LY29uZmlnDQppbmRleCA2OWNhMThjMTViLi5hM2Y1YzYyNmU2IDEwMDY0
NA0KLS0tIGEvZHJpdmVycy9ncGlvL0tjb25maWcNCisrKyBiL2RyaXZlcnMvZ3Bpby9LY29uZmln
DQpAQCAtODMsNiArODMsMTEgQEAgY29uZmlnIEFTUEVFRF9HUElPDQogCWhlbHANCiAJICBUaGlz
IGRyaXZlciBzdXBwb3J0cyB0aGUgQXNwZWVkIEdQSU8gY29udHJvbGxlcg0KIA0KK2NvbmZpZyBB
U1BFRURfU0dQSU8NCisJYm9vbCAiQXNwZWVkIFNlcmlhbCBHUElPIERyaXZlciINCisJaGVscA0K
KwkgIFRoaXMgZHJpdmVyIHN1cHBvcnRzIHRoZSBBc3BlZWQgU0dQSU8gY29udHJvbGxlcg0KKw0K
IGNvbmZpZyBEQThYWF9HUElPDQogCWJvb2wgIkRBOHh4IEdQSU8gRHJpdmVyIg0KIAloZWxwDQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9ncGlvL01ha2VmaWxlIGIvZHJpdmVycy9ncGlvL01ha2VmaWxl
DQppbmRleCBjOWE0N2JmZDUxLi5lNzU0YTcwYzdiIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncGlv
L01ha2VmaWxlDQorKysgYi9kcml2ZXJzL2dwaW8vTWFrZWZpbGUNCkBAIC0xMyw2ICsxMyw3IEBA
IG9iai0kKENPTkZJR18kKFNQTF8pRE1fUENBOTUzWCkJKz0gcGNhOTUzeF9ncGlvLm8NCiBvYmot
JChDT05GSUdfRE1fNzRYMTY0KQkJKz0gNzR4MTY0X2dwaW8ubw0KIA0KIG9iai0kKENPTkZJR19B
U1BFRURfR1BJTykgKz0gYXNwZWVkX2dwaW8ubw0KK29iai0kKENPTkZJR19BU1BFRURfU0dQSU8p
ICs9IGFzcGVlZF9zZ3Bpby5vDQogb2JqLSQoQ09ORklHX0FUOTFfR1BJTykJKz0gYXQ5MV9ncGlv
Lm8NCiBvYmotJChDT05GSUdfQVRNRUxfUElPNCkJKz0gYXRtZWxfcGlvNC5vDQogb2JqLSQoQ09O
RklHX0JDTTYzNDVfR1BJTykJKz0gYmNtNjM0NV9ncGlvLm8NCmRpZmYgLS1naXQgYS9kcml2ZXJz
L2dwaW8vYXNwZWVkX3NncGlvLmMgYi9kcml2ZXJzL2dwaW8vYXNwZWVkX3NncGlvLmMNCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0DQppbmRleCAwMDAwMDAwMDAwLi42YjI4YTllOWE5DQotLS0gL2Rldi9u
dWxsDQorKysgYi9kcml2ZXJzL2dwaW8vYXNwZWVkX3NncGlvLmMNCkBAIC0wLDAgKzEsMzI0IEBA
DQorLyoNCisgKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCsNCisgKiBDb3B5cmln
aHQgKEMpIDIwMjQsIEtOUyBHcm91cCBMTEMgKFlBRFJPKQ0KKyAqDQorICogVGhpcyBkcml2ZXIg
aXMgYmFzZWQgb24gTGludXggS2VybmVsIGRyaXZlciBieQ0KKyAqIENvcHlyaWdodCAyMDE5IEFt
ZXJpY2FuIE1lZ2F0cmVuZHMgSW50ZXJuYXRpb25hbCBMTEMuDQorICovDQorDQorI2luY2x1ZGUg
PGNvbW1vbi5oPg0KKyNpbmNsdWRlIDxhc20vaW8uaD4NCisjaW5jbHVkZSA8YXNtL2dwaW8uaD4N
CisNCisjaW5jbHVkZSA8Y29uZmlnLmg+DQorI2luY2x1ZGUgPGNvbW1vbi5oPg0KKyNpbmNsdWRl
IDxjbGsuaD4NCisjaW5jbHVkZSA8ZG0uaD4NCisjaW5jbHVkZSA8YXNtL2lvLmg+DQorI2luY2x1
ZGUgPGxpbnV4L3NpemVzLmg+DQorI2luY2x1ZGUgPGxpbnV4L2JpdG9wcy5oPg0KKyNpbmNsdWRl
IDxsaW51eC9iaXRmaWVsZC5oPg0KKw0KKyNkZWZpbmUgQVNQRUVEX1NHUElPX0NUUkwJCTB4NTQN
CisNCisjZGVmaW5lIEFTUEVFRF9TR1BJT19DTEtfRElWX01BU0sJR0VOTUFTSygzMSwgMTYpDQor
I2RlZmluZSBBU1BFRURfU0dQSU9fRU5BQkxFCQlCSVQoMCkNCisjZGVmaW5lIEFTUEVFRF9TR1BJ
T19QSU5TX1NISUZUCQk2DQorDQorc3RydWN0IGFzcGVlZF9zZ3Bpb19wZGF0YSB7DQorCWNvbnN0
IHUzMiBwaW5fbWFzazsNCisJY29uc3QgdTMyIGNsa19pZDsNCit9Ow0KKw0KK3N0cnVjdCBhc3Bl
ZWRfc2dwaW9fcHJpdiB7DQorCXZvaWQgKnJlZ3M7DQorfTsNCisNCitzdHJ1Y3QgYXNwZWVkX3Nn
cGlvX2Jhbmsgew0KKwl1MTYgdmFsX3JlZ3M7DQorCXUxNiByZGF0YV9yZWc7DQorCXUxNiBpcnFf
cmVnczsNCisJdTE2IHRvbGVyYW5jZV9yZWdzOw0KKwljb25zdCBjaGFyIG5hbWVzWzRdWzNdOw0K
K307DQorDQorLyoNCisgKiBOb3RlOiBUaGUgInZhbHVlIiByZWdpc3RlciByZXR1cm5zIHRoZSBp
bnB1dCB2YWx1ZSB3aGVuIHRoZSBHUElPIGlzDQorICoJIGNvbmZpZ3VyZWQgYXMgYW4gaW5wdXQu
DQorICoNCisgKgkgVGhlICJyZGF0YSIgcmVnaXN0ZXIgcmV0dXJucyB0aGUgb3V0cHV0IHZhbHVl
IHdoZW4gdGhlIEdQSU8gaXMNCisgKgkgY29uZmlndXJlZCBhcyBhbiBvdXRwdXQuDQorICovDQor
c3RhdGljIGNvbnN0IHN0cnVjdCBhc3BlZWRfc2dwaW9fYmFuayBhc3BlZWRfc2dwaW9fYmFua3Nb
XSA9IHsNCisJew0KKwkJLnZhbF9yZWdzID0gMHgwMDAwLA0KKwkJLnJkYXRhX3JlZyA9IDB4MDA3
MCwNCisJCS5pcnFfcmVncyA9IDB4MDAwNCwNCisJCS50b2xlcmFuY2VfcmVncyA9IDB4MDAxOCwN
CisJCS5uYW1lcyA9IHsgIkEiLCAiQiIsICJDIiwgIkQiIH0sDQorCX0sDQorCXsNCisJCS52YWxf
cmVncyA9IDB4MDAxQywNCisJCS5yZGF0YV9yZWcgPSAweDAwNzQsDQorCQkuaXJxX3JlZ3MgPSAw
eDAwMjAsDQorCQkudG9sZXJhbmNlX3JlZ3MgPSAweDAwMzQsDQorCQkubmFtZXMgPSB7ICJFIiwg
IkYiLCAiRyIsICJIIiB9LA0KKwl9LA0KKwl7DQorCQkudmFsX3JlZ3MgPSAweDAwMzgsDQorCQku
cmRhdGFfcmVnID0gMHgwMDc4LA0KKwkJLmlycV9yZWdzID0gMHgwMDNDLA0KKwkJLnRvbGVyYW5j
ZV9yZWdzID0gMHgwMDUwLA0KKwkJLm5hbWVzID0geyAiSSIsICJKIiwgIksiLCAiTCIgfSwNCisJ
fSwNCisJew0KKwkJLnZhbF9yZWdzID0gMHgwMDkwLA0KKwkJLnJkYXRhX3JlZyA9IDB4MDA3QywN
CisJCS5pcnFfcmVncyA9IDB4MDA5NCwNCisJCS50b2xlcmFuY2VfcmVncyA9IDB4MDBBOCwNCisJ
CS5uYW1lcyA9IHsgIk0iLCAiTiIsICJPIiwgIlAiIH0sDQorCX0sDQorfTsNCisNCitlbnVtIGFz
cGVlZF9zZ3Bpb19yZWcgew0KKwlyZWdfdmFsLA0KKwlyZWdfcmRhdGEsDQorCXJlZ19pcnFfZW5h
YmxlLA0KKwlyZWdfaXJxX3R5cGUwLA0KKwlyZWdfaXJxX3R5cGUxLA0KKwlyZWdfaXJxX3R5cGUy
LA0KKwlyZWdfaXJxX3N0YXR1cywNCisJcmVnX3RvbGVyYW5jZSwNCit9Ow0KKw0KKyNkZWZpbmUg
R1BJT19WQUxfVkFMVUUJCSgweDAwKQ0KKyNkZWZpbmUgR1BJT19JUlFfRU5BQkxFCQkoMHgwMCkN
CisjZGVmaW5lIEdQSU9fSVJRX1RZUEUwCQkoMHgwNCkNCisjZGVmaW5lIEdQSU9fSVJRX1RZUEUx
CQkoMHgwOCkNCisjZGVmaW5lIEdQSU9fSVJRX1RZUEUyCQkoMHgwQykNCisjZGVmaW5lIEdQSU9f
SVJRX1NUQVRVUwkJKDB4MTApDQorDQorI2RlZmluZSBHUElPX0JBTksoeCkJCSgoeCkgPj4gNikN
CisjZGVmaW5lIEdQSU9fT0ZGU0VUKHgpCQkoKHgpICYgR0VOTUFTSyg1LCAwKSkNCisjZGVmaW5l
IEdQSU9fQklUKHgpCQlCSVQoR1BJT19PRkZTRVQoeCkgPj4gMSkNCisNCisvKiBUaGlzIHdpbGwg
YmUgcmVzb2x2ZWQgYXQgY29tcGlsZSB0aW1lICovDQorc3RhdGljIGlubGluZSB2b2lkIF9faW9t
ZW0gKmJhbmtfcmVnKHN0cnVjdCBhc3BlZWRfc2dwaW9fcHJpdiAqZ3BpbywNCisJCQkJCWNvbnN0
IHN0cnVjdCBhc3BlZWRfc2dwaW9fYmFuayAqYmFuaywNCisJCQkJCWNvbnN0IGVudW0gYXNwZWVk
X3NncGlvX3JlZyByZWcpDQorew0KKwlzd2l0Y2ggKHJlZykgew0KKwljYXNlIHJlZ192YWw6DQor
CQlyZXR1cm4gZ3Bpby0+cmVncyArIGJhbmstPnZhbF9yZWdzICsgR1BJT19WQUxfVkFMVUU7DQor
CWNhc2UgcmVnX3JkYXRhOg0KKwkJcmV0dXJuIGdwaW8tPnJlZ3MgKyBiYW5rLT5yZGF0YV9yZWc7
DQorCWNhc2UgcmVnX2lycV9lbmFibGU6DQorCQlyZXR1cm4gZ3Bpby0+cmVncyArIGJhbmstPmly
cV9yZWdzICsgR1BJT19JUlFfRU5BQkxFOw0KKwljYXNlIHJlZ19pcnFfdHlwZTA6DQorCQlyZXR1
cm4gZ3Bpby0+cmVncyArIGJhbmstPmlycV9yZWdzICsgR1BJT19JUlFfVFlQRTA7DQorCWNhc2Ug
cmVnX2lycV90eXBlMToNCisJCXJldHVybiBncGlvLT5yZWdzICsgYmFuay0+aXJxX3JlZ3MgKyBH
UElPX0lSUV9UWVBFMTsNCisJY2FzZSByZWdfaXJxX3R5cGUyOg0KKwkJcmV0dXJuIGdwaW8tPnJl
Z3MgKyBiYW5rLT5pcnFfcmVncyArIEdQSU9fSVJRX1RZUEUyOw0KKwljYXNlIHJlZ19pcnFfc3Rh
dHVzOg0KKwkJcmV0dXJuIGdwaW8tPnJlZ3MgKyBiYW5rLT5pcnFfcmVncyArIEdQSU9fSVJRX1NU
QVRVUzsNCisJY2FzZSByZWdfdG9sZXJhbmNlOg0KKwkJcmV0dXJuIGdwaW8tPnJlZ3MgKyBiYW5r
LT50b2xlcmFuY2VfcmVnczsNCisJZGVmYXVsdDoNCisJCS8qIGFjdHVyYWxseSBpZiBjb2RlIHJ1
bnMgdG8gaGVyZSwgaXQncyBhbiBlcnJvciBjYXNlICovDQorCQlCVUcoKTsNCisJfQ0KK30NCisN
CitzdGF0aWMgY29uc3Qgc3RydWN0IGFzcGVlZF9zZ3Bpb19iYW5rICp0b19iYW5rKHVuc2lnbmVk
IGludCBvZmZzZXQpDQorew0KKwl1bnNpZ25lZCBpbnQgYmFuayA9IEdQSU9fQkFOSyhvZmZzZXQp
Ow0KKw0KKwlXQVJOX09OKGJhbmsgPj0gQVJSQVlfU0laRShhc3BlZWRfc2dwaW9fYmFua3MpKTsN
CisJcmV0dXJuICZhc3BlZWRfc2dwaW9fYmFua3NbYmFua107DQorfQ0KKw0KK3N0YXRpYyBpbmxp
bmUgYm9vbCBhc3BlZWRfc2dwaW9faXNfaW5wdXQodW5zaWduZWQgaW50IG9mZnNldCkNCit7DQor
CXJldHVybiAhKG9mZnNldCAmIDB4MSk7DQorfQ0KKw0KK3N0YXRpYyBpbnQgYXNwZWVkX3NncGlv
X2dldF92YWx1ZShzdHJ1Y3QgdWRldmljZSAqZGV2LCB1bnNpZ25lZCBvZmZzZXQpDQorew0KKwlz
dHJ1Y3QgYXNwZWVkX3NncGlvX3ByaXYgKnByaXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsNCisJY29u
c3Qgc3RydWN0IGFzcGVlZF9zZ3Bpb19iYW5rICpiYW5rID0gdG9fYmFuayhvZmZzZXQpOw0KKw0K
KwlyZXR1cm4gISEocmVhZGwoDQorCQliYW5rX3JlZyhwcml2LCBiYW5rLA0KKwkJCWFzcGVlZF9z
Z3Bpb19pc19pbnB1dChvZmZzZXQpID8gcmVnX3ZhbCA6IHJlZ19yZGF0YSkpDQorCQkJJiBHUElP
X0JJVChvZmZzZXQpKTsNCit9DQorDQorc3RhdGljIGludCBhc3BlZWRfc2dwaW9fc2V0X3ZhbHVl
KHN0cnVjdCB1ZGV2aWNlICpkZXYsIHVuc2lnbmVkIG9mZnNldCwNCisJCQkJCWludCB2YWx1ZSkN
Cit7DQorCXN0cnVjdCBhc3BlZWRfc2dwaW9fcHJpdiAqcHJpdjsNCisJY29uc3Qgc3RydWN0IGFz
cGVlZF9zZ3Bpb19iYW5rICpiYW5rOw0KKwl1MzIgZGF0YTsNCisNCisJaWYgKGFzcGVlZF9zZ3Bp
b19pc19pbnB1dChvZmZzZXQpKQ0KKwkJcmV0dXJuIC1FSU5WQUw7DQorDQorCXByaXYgPSBkZXZf
Z2V0X3ByaXYoZGV2KTsNCisJYmFuayA9IHRvX2Jhbmsob2Zmc2V0KTsNCisJZGF0YSA9IHJlYWRs
KGJhbmtfcmVnKHByaXYsIGJhbmssIHJlZ19yZGF0YSkpOw0KKw0KKwlpZiAodmFsdWUpDQorCQlk
YXRhIHw9IEdQSU9fQklUKG9mZnNldCk7DQorCWVsc2UNCisJCWRhdGEgJj0gfkdQSU9fQklUKG9m
ZnNldCk7DQorDQorCXdyaXRlbChkYXRhLCBiYW5rX3JlZyhwcml2LCBiYW5rLCByZWdfdmFsKSk7
DQorDQorCXJldHVybiAwOw0KK30NCisNCitzdGF0aWMgaW50IGFzcGVlZF9zZ3Bpb19kaXJlY3Rp
b25faW5wdXQoc3RydWN0IHVkZXZpY2UgKmRldiwgdW5zaWduZWQgb2Zmc2V0KQ0KK3sNCisJc3Ry
dWN0IGdwaW9fZGV2X3ByaXYgKnVjX3ByaXYgPSBkZXZfZ2V0X3VjbGFzc19wcml2KGRldik7DQor
DQorCWlmIChvZmZzZXQgPj0gdWNfcHJpdi0+Z3Bpb19jb3VudCkNCisJCXJldHVybiAtRU5PREVW
Ow0KKw0KKwlpZiAoIWFzcGVlZF9zZ3Bpb19pc19pbnB1dChvZmZzZXQpKQ0KKwkJcmV0dXJuIC1F
T1BOT1RTVVBQOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQorc3RhdGljIGludCBhc3BlZWRfc2dw
aW9fZGlyZWN0aW9uX291dHB1dChzdHJ1Y3QgdWRldmljZSAqZGV2LCB1bnNpZ25lZCBvZmZzZXQs
DQorCQkJCQkJaW50IHZhbHVlKQ0KK3sNCisJc3RydWN0IGdwaW9fZGV2X3ByaXYgKnVjX3ByaXYg
PSBkZXZfZ2V0X3VjbGFzc19wcml2KGRldik7DQorDQorCWlmIChvZmZzZXQgPj0gdWNfcHJpdi0+
Z3Bpb19jb3VudCkNCisJCXJldHVybiAtRU5PREVWOw0KKw0KKwlpZiAoYXNwZWVkX3NncGlvX2lz
X2lucHV0KG9mZnNldCkpDQorCQlyZXR1cm4gLUVPUE5PVFNVUFA7DQorDQorCXJldHVybiBhc3Bl
ZWRfc2dwaW9fc2V0X3ZhbHVlKGRldiwgb2Zmc2V0LCB2YWx1ZSk7DQorfQ0KKw0KK3N0YXRpYyBp
bnQgYXNwZWVkX3NncGlvX2dldF9mdW5jdGlvbihzdHJ1Y3QgdWRldmljZSAqZGV2LCB1bnNpZ25l
ZCBvZmZzZXQpDQorew0KKwlzdHJ1Y3QgZ3Bpb19kZXZfcHJpdiAqdWNfcHJpdiA9IGRldl9nZXRf
dWNsYXNzX3ByaXYoZGV2KTsNCisNCisJaWYgKG9mZnNldCA+PSB1Y19wcml2LT5ncGlvX2NvdW50
KQ0KKwkJcmV0dXJuIC1FTk9ERVY7DQorDQorCWlmKGFzcGVlZF9zZ3Bpb19pc19pbnB1dChvZmZz
ZXQpKQ0KKwkJcmV0dXJuIEdQSU9GX0lOUFVUOw0KKwllbHNlDQorCQlyZXR1cm4gR1BJT0ZfT1VU
UFVUOw0KK30NCisNCitzdGF0aWMgY29uc3Qgc3RydWN0IGRtX2dwaW9fb3BzIHNncGlvX2FzcGVl
ZF9vcHMgPSB7DQorCS5kaXJlY3Rpb25faW5wdXQgPSBhc3BlZWRfc2dwaW9fZGlyZWN0aW9uX2lu
cHV0LA0KKwkuZGlyZWN0aW9uX291dHB1dCA9IGFzcGVlZF9zZ3Bpb19kaXJlY3Rpb25fb3V0cHV0
LA0KKwkuZ2V0X3ZhbHVlID0gYXNwZWVkX3NncGlvX2dldF92YWx1ZSwNCisJLnNldF92YWx1ZSA9
IGFzcGVlZF9zZ3Bpb19zZXRfdmFsdWUsDQorCS5nZXRfZnVuY3Rpb24gPSBhc3BlZWRfc2dwaW9f
Z2V0X2Z1bmN0aW9uLA0KK307DQorDQorc3RhdGljIGludCBhc3BlZWRfc2dwaW9fcHJvYmUoc3Ry
dWN0IHVkZXZpY2UgKmRldikNCit7DQorCXN0cnVjdCBncGlvX2Rldl9wcml2ICp1Y19wcml2ID0g
ZGV2X2dldF91Y2xhc3NfcHJpdihkZXYpOw0KKwlzdHJ1Y3QgYXNwZWVkX3NncGlvX3ByaXYgKnBy
aXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsNCisJY29uc3Qgc3RydWN0IGFzcGVlZF9zZ3Bpb19wZGF0
YSAqcGRhdGEgPQ0KKwkJKGNvbnN0IHN0cnVjdCBhc3BlZWRfc2dwaW9fcGRhdGEgKikgZGV2X2dl
dF9kcml2ZXJfZGF0YShkZXYpOw0KKwlzdHJ1Y3QgY2xrIGNsazsNCisJdTMyIG5yX2dwaW9zOw0K
Kwl1MzIgc2dwaW9fZnJlcSA9IDIwMDAwMDA7DQorCXUzMiBzZ3Bpb19jbGtfZGl2Ow0KKwl1MzIg
YXBiX2ZyZXE7DQorCXUzMiBncGlvX2NudF9yZWd2YWw7DQorCWludCByZXQ7DQorDQorCXVjX3By
aXYtPmJhbmtfbmFtZSA9IGRldi0+bmFtZTsNCisJb2Zub2RlX3JlYWRfdTMyKGRldl9vZm5vZGUo
ZGV2KSwgIm5ncGlvcyIsICZucl9ncGlvcyk7DQorCW9mbm9kZV9yZWFkX3UzMihkZXZfb2Zub2Rl
KGRldiksICJidXMtZnJlcXVlbmN5IiwgJnNncGlvX2ZyZXEpOw0KKwlpZiAoc2dwaW9fZnJlcSA9
PSAwKQ0KKwkJcmV0dXJuIC1FSU5WQUw7DQorDQorCS8qDQorCSAqIEZyb20gdGhlIGRhdGFzaGVl
dCwNCisJICoJU0dQSU8gcGVyaW9kID0gMS9QQ0xLICogMiAqIChHUElPMjU0WzMxOjE2XSArIDEp
DQorCSAqCXBlcmlvZCA9IDIgKiAoR1BJTzI1NFszMToxNl0gKyAxKSAvIFBDTEsNCisJICoJZnJl
cXVlbmN5ID0gMSAvICgyICogKEdQSU8yNTRbMzE6MTZdICsgMSkgLyBQQ0xLKQ0KKwkgKglmcmVx
dWVuY3kgPSBQQ0xLIC8gKDIgKiAoR1BJTzI1NFszMToxNl0gKyAxKSkNCisJICoJZnJlcXVlbmN5
ICogMiAqIChHUElPMjU0WzMxOjE2XSArIDEpID0gUENMSw0KKwkgKglHUElPMjU0WzMxOjE2XSA9
IFBDTEsgLyAoZnJlcXVlbmN5ICogMikgLSAxDQorCSAqLw0KKw0KKwlyZXQgPSBjbGtfZ2V0X2J5
X2luZGV4KGRldiwgMCwgJmNsayk7DQorCWlmIChyZXQgPCAwKSB7DQorCQlwcl93YXJuKCIlczog
Q2FuJ3QgZ2V0IGNsb2NrIGZvciAlczogJWRcbiIsIF9fZnVuY19fLCBkZXYtPm5hbWUsDQorCQkg
ICAgICByZXQpOw0KKwl9DQorDQorCWFwYl9mcmVxID0gY2xrX2dldF9yYXRlKCZjbGspOw0KKwlj
bGtfZnJlZSgmY2xrKTsNCisNCisJaWYgKElTX0VSUl9WQUxVRShhcGJfZnJlcSkpIHsNCisJCXBy
X3dhcm4oImFzcGVlZC1zZ3BpbyBmYWlsZWQgdG8gZ2V0IGNsb2NrXG4iKTsNCisJCXJldHVybiBy
ZXQ7DQorCX0NCisNCisJc2dwaW9fY2xrX2RpdiA9IChhcGJfZnJlcSAvIChzZ3Bpb19mcmVxICog
MikpIC0gMTsNCisJaWYgKCFGSUVMRF9GSVQoQVNQRUVEX1NHUElPX0NMS19ESVZfTUFTSywgc2dw
aW9fY2xrX2RpdikpIHsNCisJCXByX3dhcm4oImFzcGVlZC1zZ3BpbyBjbG9jayBpcyBub3QgcmVw
cmVzZW50YWJsZVxuIik7DQorCQlyZXR1cm4gLUVJTlZBTDsNCisJfQ0KKw0KKwlwcml2LT5yZWdz
ID0gZGV2ZmR0X2dldF9hZGRyX3B0cihkZXYpOw0KKw0KKwlncGlvX2NudF9yZWd2YWwgPSAoKG5y
X2dwaW9zIC8gOCkgPDwgQVNQRUVEX1NHUElPX1BJTlNfU0hJRlQpDQorCQkJJiBwZGF0YS0+cGlu
X21hc2s7DQorDQorCXdyaXRlbChGSUVMRF9QUkVQKEFTUEVFRF9TR1BJT19DTEtfRElWX01BU0ss
IHNncGlvX2Nsa19kaXYpIHwNCisJCWdwaW9fY250X3JlZ3ZhbCB8IEFTUEVFRF9TR1BJT19FTkFC
TEUsDQorCQlwcml2LT5yZWdzICsgQVNQRUVEX1NHUElPX0NUUkwpOw0KKw0KKwl1Y19wcml2LT5n
cGlvX2NvdW50ID0gbnJfZ3Bpb3MgKiAyOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQorc3RhdGlj
IGNvbnN0IHN0cnVjdCBhc3BlZWRfc2dwaW9fcGRhdGEgYXN0MjQwMF9zZ3Bpb19wZGF0YSA9IHsN
CisJLnBpbl9tYXNrID0gR0VOTUFTSyg5LCA2KSwNCit9Ow0KKw0KK3N0YXRpYyBjb25zdCBzdHJ1
Y3QgYXNwZWVkX3NncGlvX3BkYXRhIGFzdDI2MDBfc2dwaW9tX3BkYXRhID0gew0KKwkucGluX21h
c2sgPSBHRU5NQVNLKDEwLCA2KSwNCit9Ow0KKw0KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgdWRldmlj
ZV9pZCBhc3BlZWRfc2dwaW9faWRzW10gPSB7DQorCXsNCisJCS5jb21wYXRpYmxlID0gImFzcGVl
ZCxhc3QyNDAwLXNncGlvIiwNCisJCS5kYXRhID0gKHVsb25nKSZhc3QyNDAwX3NncGlvX3BkYXRh
DQorCX0sDQorCXsNCisJCS5jb21wYXRpYmxlID0gImFzcGVlZCxhc3QyNTAwLXNncGlvIiwNCisJ
CS5kYXRhID0gKHVsb25nKSZhc3QyNDAwX3NncGlvX3BkYXRhDQorCX0sDQorCXsNCisJCS5jb21w
YXRpYmxlID0gImFzcGVlZCxhc3QyNjAwLXNncGlvbSIsDQorCQkuZGF0YSA9ICh1bG9uZykmYXN0
MjYwMF9zZ3Bpb21fcGRhdGENCisJfSwNCisJe30NCit9Ow0KKw0KK1VfQk9PVF9EUklWRVIoc2dw
aW9fYXNwZWVkKSA9IHsNCisJLm5hbWUgPSAic2dwaW9fYXNwZWVkIiwNCisJLmlkID0gVUNMQVNT
X0dQSU8sDQorCS5vZl9tYXRjaCA9IGFzcGVlZF9zZ3Bpb19pZHMsDQorCS5vcHMgPSAmc2dwaW9f
YXNwZWVkX29wcywNCisJLnByb2JlID0gYXNwZWVkX3NncGlvX3Byb2JlLA0KKwkucHJpdl9hdXRv
X2FsbG9jX3NpemUgPSBzaXplb2Yoc3RydWN0IGFzcGVlZF9zZ3Bpb19wcml2KSwNCit9Ow0KLS0g
DQoyLjM5LjINCg0K
